<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido de Pizza - EETPySO 473</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: url('pizza_deliciosa.png') no-repeat center center fixed;
            background-size: cover;
        }
        .pizza-card {
            transition: transform 0.2s;
        }
        .pizza-card:hover { transform: translateY(-5px);}
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0;}
        input[type="number"] { -moz-appearance: textfield;}
        .bg-blur {
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(2px);
        }
        #pedido-exito { display: none; }
    </style>
</head>
<body class="min-h-screen relative overflow-x-auto">
    <main class="relative z-10 py-6 px-2 sm:px-4">
        <div class="max-w-4xl mx-auto bg-blur rounded-3xl shadow-2xl p-4 sm:p-8 md:p-12 border border-gray-200">
            <!-- MENSAJE DE √âXITO OCULTO -->
            <div id="pedido-exito" class="mb-6 p-4 rounded-xl bg-green-100 text-green-800 text-2xl font-bold text-center border border-green-300">
                ¬°Pedido registrado con √©xito!
            </div>
            <!-- Encabezado -->
            <header class="text-center mb-10">
                <h1 class="text-5xl font-extrabold text-red-600 mb-4 animate-pulse drop-shadow-lg">üçï‚ú® ¬°Pizza para tu panza! ‚ú®üçï</h1>
                <p class="text-xl text-gray-700 leading-relaxed">¬°Hola, comunidad EETPySO 473! ¬øTe antojaste de una pizza y encima quer√©s hacer una buena obra? ¬°Lleg√≥ la oportunidad perfecta!</p>
                <p class="text-lg text-gray-600 mt-2">¬°Estamos juntando fondos para adquirir un elemento del taller de carpinter√≠a!</p>
            </header>
            <!-- Secci√≥n de Promociones -->
            <section class="mb-12">
                <h2 class="text-4xl font-bold text-center text-orange-500 mb-8">¬°Nuestras Promos que te har√°n delirar! ü§§</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Promo 1 -->
                    <div class="pizza-card bg-white p-6 rounded-2xl shadow-lg border border-red-200 flex flex-col items-center text-center">
                        <img src="https://placehold.co/150x100/fecaca/dc2626?text=Muzzarella" alt="Pizza Muzzarella" class="rounded-lg mb-4 shadow-md">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-2">PROMO 1: ¬°La Cl√°sica!</h3>
                        <p class="text-xl text-gray-600 mb-4">1 Muzzarella</p>
                        <p class="text-3xl font-bold text-red-600 mb-4">$6.500</p>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity('promo1', -1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">-</button>
                            <input type="number" id="promo1-qty" value="0" min="0" class="w-16 text-center border border-gray-300 rounded-md py-1 text-lg" onchange="calculateTotal()">
                            <button onclick="updateQuantity('promo1', 1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">+</button>
                        </div>
                    </div>
                    <!-- Promo 2 -->
                    <div class="pizza-card bg-white p-6 rounded-2xl shadow-lg border border-red-200 flex flex-col items-center text-center">
                        <img src="https://placehold.co/150x100/fecaca/dc2626?text=Especial" alt="Pizza Especial" class="rounded-lg mb-4 shadow-md">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-2">PROMO 2: ¬°La Estrella!</h3>
                        <p class="text-xl text-gray-600 mb-4">1 Especial</p>
                        <p class="text-3xl font-bold text-red-600 mb-4">$7.200</p>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity('promo2', -1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">-</button>
                            <input type="number" id="promo2-qty" value="0" min="0" class="w-16 text-center border border-gray-300 rounded-md py-1 text-lg" onchange="calculateTotal()">
                            <button onclick="updateQuantity('promo2', 1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">+</button>
                        </div>
                    </div>
                    <!-- Promo 3 -->
                    <div class="pizza-card bg-white p-6 rounded-2xl shadow-lg border border-red-200 flex flex-col items-center text-center">
                        <img src="https://placehold.co/150x100/fecaca/dc2626?text=2+Muzzas" alt="2 Pizzas Muzzarella" class="rounded-lg mb-4 shadow-md">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-2">PROMO 3: ¬°D√∫o Muzzarella!</h3>
                        <p class="text-xl text-gray-600 mb-4">2 Muzzarellas</p>
                        <p class="text-3xl font-bold text-red-600 mb-4">$11.000</p>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity('promo3', -1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">-</button>
                            <input type="number" id="promo3-qty" value="0" min="0" class="w-16 text-center border border-gray-300 rounded-md py-1 text-lg" onchange="calculateTotal()">
                            <button onclick="updateQuantity('promo3', 1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">+</button>
                        </div>
                    </div>
                    <!-- Promo 4 -->
                    <div class="pizza-card bg-white p-6 rounded-2xl shadow-lg border border-red-200 flex flex-col items-center text-center">
                        <img src="https://placehold.co/150x100/fecaca/dc2626?text=2+Especiales" alt="2 Pizzas Especiales" class="rounded-lg mb-4 shadow-md">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-2">PROMO 4: ¬°D√∫o Especial!</h3>
                        <p class="text-xl text-gray-600 mb-4">2 Especiales</p>
                        <p class="text-3xl font-bold text-red-600 mb-4">$13.000</p>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity('promo4', -1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">-</button>
                            <input type="number" id="promo4-qty" value="0" min="0" class="w-16 text-center border border-gray-300 rounded-md py-1 text-lg" onchange="calculateTotal()">
                            <button onclick="updateQuantity('promo4', 1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">+</button>
                        </div>
                    </div>
                    <!-- Promo 5 -->
                    <div class="pizza-card bg-white p-6 rounded-2xl shadow-lg border border-red-200 flex flex-col items-center text-center">
                        <img src="https://placehold.co/150x100/fecaca/dc2626?text=Muzza+y+Especial" alt="Pizza Muzzarella y Especial" class="rounded-lg mb-4 shadow-md">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-2">PROMO 5: ¬°El Combo Perfecto!</h3>
                        <p class="text-xl text-gray-600 mb-4">1 Muzzarella y 1 Especial</p>
                        <p class="text-3xl font-bold text-red-600 mb-4">$12.000</p>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity('promo5', -1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">-</button>
                            <input type="number" id="promo5-qty" value="0" min="0" class="w-16 text-center border border-gray-300 rounded-md py-1 text-lg" onchange="calculateTotal()">
                            <button onclick="updateQuantity('promo5', 1)" class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50">+</button>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Resumen del Pedido y Datos del Cliente -->
            <section class="mb-12 bg-orange-50 p-8 rounded-2xl shadow-inner border border-orange-200">
                <h2 class="text-3xl font-bold text-orange-600 mb-6 text-center">Tu Pedido</h2>
                <div class="mb-6">
                    <label for="customer-name" class="block text-gray-700 text-lg font-medium mb-2">Tu Nombre:</label>
                    <input type="text" id="customer-name" placeholder="Ej: Juan P√©rez" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-transparent text-lg">
                </div>
                <div class="mb-6">
                    <label for="customer-whatsapp" class="block text-gray-700 text-lg font-medium mb-2">Tu WhatsApp (opcional):</label>
                    <input type="tel" id="customer-whatsapp" placeholder="Ej: +5493415462593" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-transparent text-lg">
                </div>
                <div id="order-summary" class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Detalle del Pedido:</h3>
                    <ul id="summary-list" class="list-disc list-inside text-lg text-gray-700 mb-4"></ul>
                    <p class="text-3xl font-bold text-red-700 text-right">Total: <span id="total-price">$0</span></p>
                </div>
            </section>
            <!-- Detalles Importantes Mejorados para M√≥vil -->
            <section class="bg-blue-50 p-4 sm:p-8 rounded-2xl shadow-inner border border-blue-200 mb-12">
                <h2 class="text-3xl font-bold text-blue-600 mb-6 text-center">‚ö†Ô∏è ¬°ATENCI√ìN! Detalles Importantes ‚ö†Ô∏è</h2>
                <ul class="space-y-4 text-lg text-gray-700">
                    <li class="flex flex-col sm:flex-row items-start sm:items-center gap-2 bg-blue-100 border border-blue-200 rounded-lg p-3">
                        <span class="flex-shrink-0">
                            <svg class="w-5 h-5 sm:w-6 sm:h-6 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l3 3a1 1 0 001.414-1.414L11 9.586V6z" clip-rule="evenodd"></path></svg>
                        </span>
                        <div>
                            <span class="font-semibold block sm:inline">Pedidos hasta el:</span>
                            01 de agosto
                        </div>
                    </li>
                    <li class="flex flex-col sm:flex-row items-start sm:items-center gap-2 bg-blue-100 border border-blue-200 rounded-lg p-3">
                        <span class="flex-shrink-0">
                            <svg class="w-5 h-5 sm:w-6 sm:h-6 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg>
                        </span>
                        <div>
                            <span class="font-semibold block sm:inline">Retiro en la escuela:</span>
                            Viernes 08 de agosto a partir de las 15:00 hs.
                        </div>
                    </li>
                    <li class="flex flex-col items-center bg-blue-100 border border-blue-200 rounded-lg p-3">
                        <h3 class="text-xl font-bold text-blue-700 text-center mb-1 w-full">Forma de Pago</h3>
                        <div class="text-center text-base text-gray-700 mb-2 w-full">¬°Solo aceptamos transferencias!</div>
                        <div class="flex justify-center w-full">
                            <span class="block text-center text-3xl font-extrabold text-red-600 bg-red-100 rounded-xl px-6 py-2 shadow-lg mt-2 animate-pulse select-all">
                                Alias: pizza.473
                            </span>
                        </div>
                        <span class="mt-2 text-gray-500 text-sm text-center w-full">Copi√° el alias y pag√° desde tu app bancaria üòâ</span>
                    </li>
                </ul>
            </section>
            <!-- Bot√≥n de WhatsApp al final -->
            <div class="mb-2">
                <button onclick="sendWhatsAppOrder()" class="w-full bg-green-500 text-white py-4 rounded-xl text-2xl font-bold hover:bg-green-600 transition-all duration-300 shadow-lg transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-400">
                    ¬°Hac√© tu pedido por WhatsApp!
                </button>
            </div>
        </div>
    </main>
    <script>
        // CONFIGURACI√ìN PARA TU GOOGLE FORM
        const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSeVjMBVTSh27PufUnNk93PYpCBPKNc-gcoCR0VD5Gg9CNr02A/formResponse";
        const ENTRY_NOMBRE   = "entry.1243472995";
        const ENTRY_WHATSAPP = "entry.1416383139";
        const ENTRY_PEDIDO   = "entry.477917344";
        const ENTRY_TOTAL    = "entry.366621470";

        const promos = {
            promo1: { name: '1 Muzzarella', price: 6500 },
            promo2: { name: '1 Especial', price: 7200 },
            promo3: { name: '2 Muzzarellas', price: 11000 },
            promo4: { name: '2 Especiales', price: 13000 },
            promo5: { name: '1 Muzzarella y 1 Especial', price: 12000 }
        };

        function updateQuantity(promoId, change) {
            const input = document.getElementById(`${promoId}-qty`);
            let currentQty = parseInt(input.value);
            let newQty = currentQty + change;
            if (newQty < 0) newQty = 0;
            input.value = newQty;
            calculateTotal();
        }
        function calculateTotal() {
            let total = 0;
            const summaryList = document.getElementById('summary-list');
            summaryList.innerHTML = '';
            for (const id in promos) {
                const qtyInput = document.getElementById(`${id}-qty`);
                const quantity = parseInt(qtyInput.value);
                if (quantity > 0) {
                    const promo = promos[id];
                    total += promo.price * quantity;
                    const listItem = document.createElement('li');
                    listItem.textContent = `${quantity} x ${promo.name} - $${(promo.price * quantity).toLocaleString('es-AR')}`;
                    summaryList.appendChild(listItem);
                }
            }
            document.getElementById('total-price').textContent = `$${total.toLocaleString('es-AR')}`;
        }

        function sendWhatsAppOrder() {
            const customerName = document.getElementById('customer-name').value.trim();
            const customerWhatsapp = document.getElementById('customer-whatsapp').value.trim();
            let orderDetails = [];
            let totalAmount = 0;

            for (const id in promos) {
                const qtyInput = document.getElementById(`${id}-qty`);
                const quantity = parseInt(qtyInput.value);
                if (quantity > 0) {
                    const promo = promos[id];
                    orderDetails.push(`${quantity} x ${promo.name} ($${(promo.price * quantity).toLocaleString('es-AR')})`);
                    totalAmount += promo.price * quantity;
                }
            }

            if (orderDetails.length === 0) {
                alert("Por favor, selecciona al menos una pizza para tu pedido.");
                return;
            }

            let detallePedido = orderDetails.join('\n');
            let total = `$${totalAmount.toLocaleString('es-AR')}`;

            // 1. Registrar oculto en Google Form
            enviarPedidoAGoogleSheet(customerName, customerWhatsapp, detallePedido, total);

            // 2. Mostrar mensaje de √©xito
            document.getElementById('pedido-exito').style.display = "block";
            setTimeout(() => {
                document.getElementById('pedido-exito').style.display = "none";
            }, 3500);

            // 3. Enviar a WhatsApp
            let message = `¬°Hola! Quiero hacer un pedido de pizza para la EETPySO 473.\n\n`;
            if (customerName) message += `Mi nombre es: ${customerName}\n`;
            if (customerWhatsapp) message += `Mi WhatsApp es: ${customerWhatsapp}\n`;
            message += `\nDetalle del pedido:\n${detallePedido}\n\nTotal a pagar: ${total}\n\n¬°Gracias!`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappNumber = '5493415462593';
            window.open(`https://wa.me/${whatsappNumber}?text=${encodedMessage}`, '_blank');
        }

        // Enviar a Google Form oculto
        function enviarPedidoAGoogleSheet(nombre, whatsapp, pedido, total) {
            const data = new URLSearchParams();
            data.append(ENTRY_NOMBRE, nombre);
            data.append(ENTRY_WHATSAPP, whatsapp);
            data.append(ENTRY_PEDIDO, pedido);
            data.append(ENTRY_TOTAL, total);

            fetch(formURL, {
                method: 'POST',
                mode: 'no-cors',
                body: data
            }).catch(e => {});
        }

        document.addEventListener('DOMContentLoaded', calculateTotal);
    </script>
</body>
</html>
